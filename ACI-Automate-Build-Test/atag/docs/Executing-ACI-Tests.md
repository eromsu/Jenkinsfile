# Executing ACI tests with RASTA/CXTA

After successful using ATAG to generate RASTA/CXTA tests you are ready to
execute your tests.

## Step 1: Installing and running RASTA/CXTA (optional)

If you do not already have a working installation of RASTA and/or CXTA should
you install one of these tools now.

Please reference the following pages for information about how to install the
tools:

* RASTA: <https://wwwin-github.cisco.com/pages/AS-Community/RASTA/Installing-RASTA/>
* CXTA: <https://wwwin-github.cisco.com/pages/AS-Community/CXTA/>

## Step 2: Copying ATAG test scripts into your RASTA/CXTA environment

In order to use RASTA/CXTA to execute the tests generated by ATAG are you required
to make your ATAG test scripts accessible within the RASTA/CXTA environment. This
can be done in multiple ways depending on how you run RASTA/CXTA.

The instructions below assume that you run RASTA/CXTA within a Linux container, which
allows you to expose your ATAC directory as a persistent Docker volume within
the RASTA/CXTA container.

**Please note that the following instructions are for reference purposes only, you may
need to modify them slightly to match your own environment.**

Start RASTA container and expose ATAG directory within the container:

```
docker container ls -a  
docker run -it -u cisco --name rasta -v /home/$USER/atag:/atag dockerhub.cisco.com/as-release-docker/cisco/rasta-centos7:1.4.0 /bin/bash -l  
docker container start rasta  
```

## Step 3: Execute ACI Tests

The instructions below assume that you run RASTA/CXTA within a container. If
this is not the case, then ignore the parts about entering an interactive
bash session within the container.

First step is to enter an interactive bash session within the RASTA/CXTA
container.

**Please note that the following instructions are for reference purposes only,
you may need to modify them slightly to match your own environment.**

```
docker exec -it -u cisco rasta /bin/bash
(virtualenv-rasta) [cisco@34d50b782e0a /]$
```

After having entered the interactive shell session within the RASTA/CXTA container
is it now time to execute the tests generated by ATAG using the `robot` command. 

```
(virtualenv-rasta) [cisco@34d50b782e0a /]$ cd atag/
(virtualenv-rasta) [cisco@34d50b782e0a atag]$ robot aci_tests.robot 
==============================================================================
Aci Tests                                                                     
==============================================================================
Verify ACI VLAN Pool Configuration - VLAN Pool baremetal :: Verifi... | PASS |

<snip>

------------------------------------------------------------------------------
Verify ACI Fabric Connectivity - Node 202 (eth1/49) to Node 101 (e... | PASS |
------------------------------------------------------------------------------
Aci Tests                                                             | PASS |
134 critical tests, 134 passed, 0 failed
134 tests total, 134 passed, 0 failed
==============================================================================
Output:  /atag/output.xml
Log:     /atag/log.html
Report:  /atag/report.html
```

During test execution high level information about the pass/failure of each
individual test is printed on the screen.

After test execution is completed the test results and output collected during
the executed are save in three files:

* report.html: Summary test report providing various statistics per Tag, etc.
* log.html: Detailed test report providing information about each test executed,
including all commands and output collected during test execution.
* output.xml: Identical to log.html, but provides the information in an XML format
that are easier to analyse in a programmatical way if needed.

Due to the usage of Docker persistent volumes are all three files save onto the
local filesystem of the host where the RASTA/CXTS container is launched from.

## Step 4: Stop and remove RASTA/CXTA container (optional)

In case you are running RASTA/CXTA in a container it may be desired to stop
the container after test execution. This can be done with the following
command:

**Please note that the following instructions are for reference purposes,
you may need to modify them slightly to match your own environment.**

```
docker container stop rasta  
```
